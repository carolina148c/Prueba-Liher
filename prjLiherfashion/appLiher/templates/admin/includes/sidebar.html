<aside class="barra-lateral">
  <div class="encabezado-barra">
    Panel Administrador
  </div>
  <ul class="menu-barra">
    <li data-section="inicio"><a href="{% url 'panel_admin' %}" class="{% if active == 'inicio' %}activo{% endif %}"><span class="icono icono-inicio"></span> Inicio</a></li>
    <li data-section="inventario"><a href="{% url 'listar_productos_tabla' %}" class="{% if active == 'inventario' %}activo{% endif %}"><span class="icono icono-inventario"></span> Inventario</a></li>
    <li data-section="catalogo"><a href="{% url 'listar_productos_catalogo' %}" class="{% if active == 'catalogo' %}activo{% endif %}"><span class="icono icono-catalogo"></span> Cat√°logo</a></li>
    <li data-section="pedidos"><a href="{% url 'pedidos' %}" class="{% if active == 'pedidos' %}activo{% endif %}"><span class="icono icono-pedidos"></span> Pedidos</a></li>
    <li data-section="usuarios"><a href="{% url 'mostrar_usuarios' %}" class="{% if active == 'usuarios' %}activo{% endif %}"><span class="icono icono-usuarios"></span> Usuarios</a></li>
    <li data-section="devoluciones"><a href="{% url 'devoluciones' %}" class="{% if active == 'devoluciones' %}activo{% endif %}"><span class="icono icono-devoluciones"></span> Devoluciones</a></li>
    <li data-section="peticiones"><a href="{% url 'peticiones' %}" class="{% if active == 'peticiones' %}activo{% endif %}"><span class="icono icono-peticiones"></span> Peticiones</a></li>
    <li data-section="vista_usuario"><a href="{% url 'pagina_principal' %}" class="{% if active == 'usuario' %}activo{% endif %}"><span class="icono icono-peticiones"></span> Vista del usuario</a></li>
  </ul>
</aside>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const permisos = {{ permisos_json|safe }};
    const menuItems = document.querySelectorAll(".menu-barra li");

    menuItems.forEach(item => {
      const section = item.dataset.section;
      if (section && permisos.hasOwnProperty(section) && !permisos[section]) {
        item.style.display = "none";
      }
    });
  });
</script>
